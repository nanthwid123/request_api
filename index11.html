<!DOCTYPE html>
<html>
  <head>
    <title>Custom Search JSON API Example</title>
  </head>
  <body>
      <input type ="text" id="Search" placeholder="Search" oninput="myFunction()"/>  
      <input type = "submit" value="test" onclick="response()" >
      <input type = "submit" value="testF" onclick="timeout()" >
      <p id = "demo" >
           <script>
               function timeout(){
                    rendomTime = Math.random();
                   console.log("timeRandom is :"+rendomTime);
               }
                var list= [
           {"name":"my Name","id":1,"type":"car owner"},
           {"name":"my Name2","id":12,"type":"car owner2"},
           {"name":"my Name4","id":123,"type":"car owner3"},
           {"name":"my Name4","id":4,"type":"car owner5"}
        ];
               function myFunction(){
                const promise = new Promise(function(resolve, reject){ 
                  time = new Date().getTime();
             setTimeout(() => {
               const currentTime = new Date().getTime();
                var searchVal = document.getElementById('Search').value;
                  const timeDiff = currentTime - time;
               if(timeDiff >= 5000){ 
                   resolve(searchVal)  
                }
         },5000)
});promise.then(data =>{
    response(data)
    setTimeout(function() {
      console.log("hello");
    } ,doTheRandom());
    var doTheRandom = function () {
    random = randomizator(60000,200000);
    setTimeout(doTheRandom, randomizator(1000, 2000)); // 1-2 seconds
}
})
               }
               var results = [];
               var searchField = "id";  
               function response(searchVal){
                   console.log(searchVal)
                for (var i=0 ; i < list.length ; i++){ 
                      if (list[i][searchField] == searchVal) {
                       results.push(list[i].id);
                       console.log(" ID "+ list[i].id)
                       console.log(" Name "+ list[i].name)
                       console.log(" Type "+ list[i].type)
                       console.log("responce is succese!!")
                       document.getElementById('demo').innerHTML = "Id :" + list[i].id + " -- " + " Name :" + list[i].name + " -- "+ "Type :" + list[i].type ;  
   }
}                
               }
            </script>
  </body>
</html>